<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>门户结构参数</title>

<link href="../framework/css/css.css" rel="stylesheet" type="text/css"></link>
<link href="../framework/balloon/balloon.css" rel="stylesheet" type="text/css"></link>

<script language="javascript" src="../framework/core.js"></script>
<script language="javascript" src="../framework/ajax.js"></script>
<script language="javascript" src="../framework/framework.js"></script>
<script language="javascript" src="../framework/balloon/balloon.js"></script>

<script language="javascript" src="structure.js"></script>

<SCRIPT LANGUAGE="JavaScript">
<!--
    /*
     *	后台响应数据节点名称
     */
    XML_CONFIG_PARAMS = "ConfigParams";
 
	URL_INIT = "data/configparams_init.xml";
	URL_SAVE = "data/_success.xml";

	URL_INIT = "pms/group!getElementParamsConfig.action";
	URL_SAVE = "pms/group!saveElementParamsConfig.action";

	var ID;
    var TYPE;
 
    function init(){
        ID = window.dialogArguments.id;
        TYPE = window.dialogArguments.type;
		var paramsStr = window.dialogArguments.params;

        var url = URL_INIT;
        var p = new HttpRequestParams();
        p.url = url;
		p.setContent("id", ID);
		p.setContent("type", TYPE);
		p.setContent("paramsItem", paramsStr);

        var request = new HttpRequest(p);
        request.onresult = function(){
            var configParamsNode = this.getNodeValue(XML_CONFIG_PARAMS);
			var tempalte = $("paramTemplate");

            tempalte.value = configParamsNode.toXml();
        }
        request.send();
    }
 
    function save() {
        var tempalte = $("paramTemplate");

	    var url = URL_SAVE;
        var p = new HttpRequestParams();
        p.url = url;
		p.setContent("id", ID);
		p.setContent("type", TYPE);
		p.setContent("configXML", tempalte.value);

        var request = new HttpRequest(p);
        request.onsuccess = function(){

        }
        request.send();
    }

    window.onload = init;
//-->
</SCRIPT>

</head>

<body>
<div class="mainBox" id="mainBox">
  <table class="full" border="0" cellspacing="0" cellpadding="0">
    <tr valign="top">
      <td class="b">
        <TEXTAREA NAME="paramTemplate" ROWS="26" COLS="86" id="paramTemplate"></TEXTAREA>
      </td>
    </tr>
    <tr height="30">
      <td align="right">
        <input type="button" value="关闭" class="btWeak" onclick="window.close()"/> 
		<input type="button" value="保存" class="btStrong" onclick="save()"/>
      </td>
    </tr>
  </table>
</div>
</body>
</html>
