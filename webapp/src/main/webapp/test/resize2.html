<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<style>
		#div2 p{ 
			padding:10px; 
			line-height:24px; 
			font-size:13px; 
			text-indent:24px; 
			color:#996600;
		} 
		
		#div2 h2{ 
			width:100%; 
			height:25px; 
			line-height:25px; 
			font-size:14px;
			background:#CC9900; 
			color:#FFFFFF; 
			text-indent:15px; 
			cursor:move; 
			overflow:hidden;
		}
		
		#div2{ 
			width:200px; 
			height:200px; 
			position:relative;
			background:#EEEEEE; 
			border:1px solid #f00; 
		} 
 
	</style>


	<script language="javascript" src="../framework/core.js"></script>

	<script type="text/javascript">


attachRowResize = function(element) {
	var handle = document.createElement("DIV"); // 拖动条
	handle.style.cssText = "cursor:row-resize;position:absolute;overflow:hidden;left:0px;bottom:0px;width:100%;height:3px;z-index:3;filter:alpha(opacity:0);opacity:0;";
	element.appendChild(handle);

	var mouseStart  = 0;  // 鼠标起始位置
	var handleStart = 0;  // 拖动条起始位置

	handle.onmousedown = function(ev) {
		var oEvent = ev || event;
		mouseStart  = oEvent.clientY;
		handleStart = handle.offsetTop;

		if (handle.setCapture) {
			handle.onmousemove = doDrag;
			handle.onmouseup = stopDrag;
			handle.setCapture();
		} else {
			document.addEventListener("mousemove", doDrag, true);
			document.addEventListener("mouseup", stopDrag, true);
		}
	};

	function doDrag(ev) {
		var oEvent = ev || event;
		var _height = oEvent.clientY - mouseStart + handleStart + handle.offsetHeight;

		if (_height < handle.offsetHeight) {
			_height = handle.offsetHeight;
		} 
		else if (_height > document.documentElement.clientHeight - element.offsetTop) {
			_height = document.documentElement.clientHeight - element.offsetTop - 2; // 防止拖出窗体外
		}
		element.style.height = _height + "px";
	};

	function stopDrag() {
		if (handle.releaseCapture) {
			handle.onmousemove = handle.onmouseup = null;
			handle.releaseCapture();
		} else {
			document.removeEventListener("mousemove", doDrag, true);
			document.removeEventListener("mouseup", stopDrag, true);
		}
	};
}


	window.onload = function() {
		var oDiv2 = document.getElementById("div2");
		Element.attachColResize(oDiv2);
		Element.attachRowResize(oDiv2);
	};

	</script>
</head>

<body>
	<div id="div2">
		<div style="width:100%; height:100%; overflow:hidden;">
			<h2>
				完美的拖拽
			</h2>
			<p>
				体验不错的JavaScript网页拖动，除了拖动，还可拖动放大，像Windows窗口一样被放大或缩小，只要按住层的右下角，就可以收放自如的放大或缩小。想使用的朋友，可将代码里的Js封装成类，从外部引入想必更合理些。'
			</p>
		</div>
	</div>

</body>

</html>