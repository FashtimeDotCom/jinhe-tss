<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML xmlns:Tree xmlns:Grid xmlns:XForm xmlns:WorkSpace>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>用户选择</title>

<link href="../framework/css/css.css" rel="stylesheet" type="text/css"></link>
<link href="../framework/balloon/balloon.css" rel="stylesheet" type="text/css"></link>
<link href="../framework/grid/grid.css" rel="stylesheet" type="text/css"></link>
<link href="../framework/xform/xform.css" rel="stylesheet" type="text/css"></link>

<script language="javascript" src="../framework/core.js"></script>
<script language="javascript" src="../framework/ajax.js"></script>
<script language="javascript" src="../framework/framework.js"></script>
<script language="javascript" src="../framework/balloon/balloon.js"></script>
<script language="javascript" src="../framework/grid/grid.js"></script>
<script language="javascript" src="../framework/xform/xform.js"></script>

<SCRIPT type="text/javascript">
<!--

	URL_INIT = "data/chooseuser_init.xml";

    URL_INIT = AUTH_PATH + "receivers/search/template"; 

    function init(){
       
	}
 
    function ok(){

        var grid2Obj = $("grid2");
        var total = grid2Obj.getVisibleRowsLength();
        if(0 < total){
            var returnVal = [];
            for(var i=0;i<total;i++){
                var vIndex = grid2Obj.getRowIndexFromVisibleIndex(i);
                var gridRowNode = grid2Obj.getRowNode_Xml(vIndex);
                var userName = gridRowNode.getAttribute("userName")||"";
                var userId = gridRowNode.getAttribute("id")||"";
                var loginName = gridRowNode.getAttribute("loginName")||"";
                var groupName = gridRowNode.getAttribute("groupName")||"";

                returnVal[returnVal.length] = {
                    userName:userName,
                    loginName:loginName,
                    userId:userId,
                    groupName:groupName
                };
            }

            window.returnValue = returnVal;
            window.close();
        }
		else {
            alert("请至少选择一个用户");
        }
    }

    window.onload = init;

//-->
</SCRIPT>
 
</head>

<body>
<div class="mainBox" id="mainBox">
	<table class="full" border="0" cellspacing="0" cellpadding="0">
	  <tr class="trxx">
		<td class="r b">&nbsp;※&nbsp;可选用户组：</td>
		<td class="r b">&nbsp;※&nbsp;可选用户：</td>
		<td class="r b">&nbsp;</td>
		<td class="b label">&nbsp;※&nbsp;已有：</td>
	  </tr>
	  <tr>
		<td class="r b" width="30%">
		  <Tree:Box id="page4Tree" treeType="menu" baseurl="../framework/tree/"><div class="loading"></div></Tree:Box>
		</td>
		<td class="r b" width="35%">
		  <Tree:Box id="page4Tree2" treeType="multi" baseurl="../framework/tree/" selectSelf="false"></Tree:Box>
		</td>
		<td class="r b" style="background-color:#E4E6F5;width:18px">
			<input type="button" class="btWeakS" value=">>" id="page4BtAdd"/>
			<input type="button" class="btWeakS" value="<<" id="page4BtDel"/>
		</td>
		<td class="b">
		  <Tree:Box id="page4Tree3" treeType="multi" baseurl="../framework/tree/" selectSelf="false"><div class="loading"></div></Tree:Box>
		</td>
	  </tr>
	  <tr height="16" class="trxx">
		<td colspan="4">
		  <input type="button" value="关闭" class="btWeak" onclick="window.close()"/> 
		  <input type="button" value="确定" class="btStrong" onclick="ok()"/>
		</td>
	  </tr>
	</table>
</div>
</body>
</html>
