<!DOCTYPE HTML>
<HTML xmlns:Form>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>日志搜索</title>

<link href="../../css/dialog.css" rel="stylesheet">
<link href="../../tools/tssJS/css/tss.all.css" rel="stylesheet">

<script src="../../tools/tssJS/tssJS.all.js"></script>
<script src="../../tools/tssUtils.js"></script>

<SCRIPT type="text/javascript">
<!--

    /* 后台响应数据节点名称  */
    XML_MAIN_FORM = "SearchLog";
 
    window.onload = function() {
		$.ajax({
    		url : "SearchXForm.xml",
    		method : "GET",
    		onresult : function() {
    			var formXML = this.getNodeValue(XML_MAIN_FORM);

    			var rowNode = formXML.querySelector("data row");
    			for(var item in window.dialogArguments) {
    				if(item != "title") {
    					$.XML.setCDATA(rowNode, item, window.dialogArguments[item]);
    				}
    			}

    			$.cache.XmlDatas[XML_MAIN_FORM] = formXML;
    			$.F("searchForm", formXML);
    		}
    	});
    }
 
    function getCondition(){
        var condition = {};       
        var formXML = $.cache.XmlDatas[XML_MAIN_FORM];
        if( formXML ) {
            var nodes = formXML.querySelectorAll("data row *");
            $.each(nodes, function(i, node){
                condition[node.nodeName] = $.XML.getText(node);
            });
        }
        window.returnValue = condition;
        window.close();
    }

//-->
</SCRIPT>

</head>

<body>
    <div class="dialog">
		<Form:Box id="searchForm"><div class="loading"></div></Form:Box>  
        <div class="bt">
    		<input type="button" value="确定" class="btStrong" onclick="getCondition()"/>
    		<input type="button" value="关闭" class="btWeak" onclick="window.close()"/> 
        </div>
    </div>
</body>
</html>